<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-05-02 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140502" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Oracle Tools - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<script src="js/site.js" type="text/javascript"></script>
                      
        
<link rel="shortcut icon" href="images/oracletools-logo.ico"/>
          
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/coherence-community/oracle-tools/">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Oracle Tools Site</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-05-02
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.3.0-SNAPSHOT
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Oracle Tools</li>
                              
      <li>
  
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                
      <li>
  
                          <a href="../adoption.html" title="Adoption">
          <i class="none"></i>
        Adoption</a>
            </li>
                
      <li>
  
                          <a href="../history.html" title="Change History">
          <i class="none"></i>
        Change History</a>
            </li>
                              <li class="nav-header">Recommended Reading</li>
                              
      <li>
  
                          <a href="../core/deferreds.html" title="Deferred References">
          <i class="none"></i>
        Deferred References</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Application Management</a>
          </li>
                              <li class="nav-header">Modules</li>
                              
      <li>
  
                          <a href="../core/index.html" title="Core Module">
          <i class="none"></i>
        Core Module</a>
            </li>
                
      <li>
  
                          <a href="../runtime/index.html" title="Runtime Module">
          <i class="none"></i>
        Runtime Module</a>
            </li>
                
      <li>
  
                          <a href="../testing-support/index.html" title="Testing Support Module">
          <i class="none"></i>
        Testing Support Module</a>
            </li>
                
      <li>
  
                          <a href="../coherence/index.html" title="Coherence Module">
          <i class="none"></i>
        Coherence Module</a>
            </li>
                              <li class="nav-header">Development</li>
                              
      <li>
  
                          <a href="../license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                
      <li>
  
                          <a href="../release-numbers.html" title="Release Numbers">
          <i class="none"></i>
        Release Numbers</a>
            </li>
                
      <li>
  
                          <a href="../source-code.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                
      <li>
  
                          <a href="../building.html" title="Build Instructions">
          <i class="none"></i>
        Build Instructions</a>
            </li>
                
      <li>
  
                          <a href="../issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                
      <li>
  
                          <a href="../contributions.html" title="Contributions">
          <i class="none"></i>
        Contributions</a>
            </li>
                
      <li>
  
                          <a href="../logging.html" title="Logging">
          <i class="none"></i>
        Logging</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Application Runtime Management<a name="Application_Runtime_Management"></a></h2>

<div class="section">
<div class="section">
<h4>The Twenty Second Synopsis<a name="The_Twenty_Second_Synopsis"></a></h4>
<p><b>What?</b> The Oracle Tools Runtime module provides a high-level framework that allows applications to define, create, monitor and manage other applications and associated processes at runtime.</p>
<p><b>When?</b> Use the Oracle Tools Runtime framework when you need to coordinate multiple application processes, especially as part of distributed application functional and integration tests or when you&#x2019;d traditionally make use of the Java Platform <tt>java.lang.Process</tt> class.</p>
<p><b>Why?</b> Programmatically controlling application processes can be a complicated and error-prone matter. While the <tt>java.lang.Process</tt> and associated classes provide rudimentary mechanisms to control application processes, developers typically need to make several assumptions about the underlying operating system or write a lot of defensive code to work in such environments.</p>
<p>The Oracle Tools framework removes these requirements and simplifies this development activity.</p>
<p><b>How?</b> Read this document to find out.</p>
<p><b>Where?</b> The Oracle Tools Runtime framework is defined in the following Maven module and Java package:</p>

<ul>
  
<li>Maven Group Id: <tt>com.oracle.tools</tt></li>
  
<li>Maven Artifact Id: <tt>oracle-tools-runtime</tt></li>
  
<li>Maven Version: <tt>1.3.0-SNAPSHOT</tt></li>
  
<li>Java Package: <tt>com.oracle.tools.runtime</tt></li>
</ul>
<hr />
</div>
<div class="section">
<h4>Overview<a name="Overview"></a></h4>
<p>The Oracle Tools Runtime module provides a framework to programmatically define, create and control executing <i>Application Processes</i>, here after simply referred to as <i>Applications</i>.</p>
<p>Central to the operation of the framework are the following three concepts:</p>

<ol style="list-style-type: decimal">
  
<li>
<p><b>Schemas:</b> Define the desired runtime characteristics of <i>Applications</i> when they are created.</p>
<p>The <tt>com.oracle.tools.runtime.ApplicationSchema</tt> interface defines the minimal requirements of a Schema.</p></li>
  
<li>
<p><b>Builders:</b> Create <i>Applications</i> from the characteristics defined by <i>Schemas</i>.</p>
<p>The <tt>com.oracle.tools.runtime.ApplicationBuilder</tt> interface defines the minimal requirements of a Builder.</p></li>
  
<li>
<p><b>Applications:</b> Provide a runtime representation of <i>Applications</i>, created by <i>Builders</i>, specified by <i>Schemas</i>.</p>
<p>The <tt>com.oracle.tools.runtime.Application</tt> interface defines the minimal requirements of an Application.</p></li>
</ol>
<p>The following sections outline how to use each of these concepts in an application, together with tips for optimization in certain environments.</p>
</div>
<div class="section">
<h4>Creating and Managing Regular Applications<a name="Creating_and_Managing_Regular_Applications"></a></h4>
<p>Let&#x2019;s start with a simple example, defining, creating and waiting for a native operating application process to terminate.</p>

<div class="source">
<pre>import com.oracle.tools.runtime.SimpleApplication;
import com.oracle.tools.runtime.SimpleApplicationBuilder;
import com.oracle.tools.runtime.SimpleApplicationSchema;
import com.oracle.tools.runtime.console.SystemApplicationConsole;

public class SimpleApplicationExample
{
    public static void main(String[] args) throws Exception
    {
        // STEP 1: Define an ApplicationSchema
        SimpleApplicationSchema schema =
            new SimpleApplicationSchema(&quot;java&quot;)
                .setArgument(&quot;-version&quot;);

        // STEP 2: Define an ApplicationBuilder
        SimpleApplicationBuilder builder
            = new SimpleApplicationBuilder();

        // STEP 3: Realize the Application
        SimpleApplication application
            = builder.realize(schema,
                              &quot;My Application&quot;,
                              new SystemApplicationConsole());

        // STEP 4: Wait for the Application to Terminate
        int exitCode = application.waitFor();
    }
}
</pre></div>
<p>In <i>Step 1</i> we instantiate a new <tt>SimpleApplicationSchema</tt> and set the operating-system process to execute, namely <tt>java</tt>, and set the arguments for the process, namely <tt>-version</tt>.</p>
<p>In <i>Step 2</i> we instantiate a new <tt>SimpleApplicationBuilder</tt> that we will use to build a <tt>SimpleApplication</tt> from a <tt>SimpleApplicationSchema</tt>. The resulting <tt>SimpleApplication</tt> will represent a native operating-system process, running on the local machine.</p>
<p>In <i>Step 3</i> we realize (create) the <tt>SimpleApplication</tt> using previously created Builder and configured Schema. For display and identification purposes, we name the returned <tt>SimpleApplication</tt> &#x201c;My Application&#x201d;.</p>
<p>Additionally we specify that all of the standard input/output/error console interactions will use the provided <tt>SystemApplicationConsole</tt>, that of which simply re-directs these streams to the standard streams. This means the the I/O from the <tt>SimpleApplication</tt> will appear as I/O in the <tt>SimpleApplicationExample</tt> I/O.</p>

<blockquote>
<p>There are many different approaches for managing Application I/O.  Each of these approaches are represented as unique classes in the  <tt>com.oracle.tools.runtime.console</tt> package.</p>
</blockquote>
<p>Lastly in <i>Step 4</i> we wait for the realized <tt>SimpleApplication</tt>, namely &#x201c;java -version&#x201d; to terminate.</p>
<p>The result of executing the <tt>SimpleApplicationExample</tt> above will produce something like the following output:</p>

<div class="source">
<pre>[My Application:err:7238]    1: java version &quot;1.7.0_11&quot;
[My Application:err:7238]    2: Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
[My Application:err:7238]    3: (terminated)
[My Application:out:7238]    1: (terminated)
</pre></div>
<p>Where by:</p>

<ul>
  
<li>
<p>The formatted output from the <tt>SystemApplicationConsole</tt> for the <tt>SimpleApplication</tt> (in this case &#x201c;java -version&#x201d;) is prefixed with <tt>[&lt;application name&gt;:&lt;device&gt;:&lt;process-id&gt;] &lt;line-number&gt;:</tt></p></li>
  
<li>
<p>When stream output is terminated, usually by the application execution terminating, the output <tt>(terminated)</tt> is output on a single line.</p></li>
</ul>

<blockquote>
<p>This example assumes that the &#x201c;java&#x201d; executable is resolvable by the  operating-system when a native process is started. If it is not, the  application may fail and a suitable error code will be returned  (during <tt>waitFor</tt>).</p>
</blockquote>
<p>For more information concerning the features and characteristics of Applications, Schemas and Builders for simple applications, please refer to the Java Documentation for the <tt>com.oracle.tools.runtime.SimpleApplication</tt>, <tt>com.oracle.tools.runtime.SimpleApplicationSchema</tt> and <tt>com.oracle.tools.runtime.SimpleApplicationBuilder</tt> classes.</p>
</div>
<div class="section">
<h4>Creating and Managing Java-based Applications<a name="Creating_and_Managing_Java-based_Applications"></a></h4>
<p>In most cases Java developers will traditionally to create and manage Java-based applications and while it is possible to do so using the Applications, Schema and Builder classes described above, the Oracle Tools Runtime framework provides specific features and implementations to deal with Java-based Applications. These are defined by the <tt>com.oracle.tools.runtime.java</tt> package.</p>
<p>For the most part, instead of using the <tt>SimpleApplicationSchema</tt> to define the characteristics of an application, Java-based applications will be defined using a <tt>com.oracle.tools.runtime.java.SimpleJavaApplicationSchema</tt>. This Schema allows a developer to simply define Java specific information, like:</p>

<ul>
  
<li>
<p>The name of the main application class.</p></li>
  
<li>
<p>The class-path of the application.</p></li>
  
<li>
<p>Required application arguments.</p></li>
  
<li>
<p>Required JVM options.</p></li>
</ul>
<p>instead of attempting to do so using operating-system specific arguments.</p>
<p><b>Example: Defining a Java Application Schema</b></p>
<p>The following example demonstrates how to define a Java Application Schema for the Oracle Coherence Console Application, that of which is often started using the <tt>main</tt> method defined by the <tt>com.tangosol.net.CacheFactory</tt> class.</p>

<div class="source">
<pre>String classpath = &quot;~/.m2/repository/com/oracle/coherence/coherence/3.7.1.9/coherence-3.7.1.9.jar&quot;;

SimpleJavaApplicationSchema schema =
    new SimpleJavaApplicationSchema(&quot;com.tangosol.net.CacheFactory&quot;, classpath)
        .setArgument(&quot;coherence-cache-config.xml&quot;)
        .setOption(&quot;-Xmx256m&quot;)
        .setSystemProperty(&quot;tangosol.coherence.clusterport&quot;, &quot;37191&quot;);
</pre></div>

<blockquote>
<p>An alternative approach to defining Oracle Coherence-based applications  is to use the Oracle Tools for Coherence module, that of which defines  specific Applications, Schemas and Builders to simplify managing  Oracle Coherence-based applications.</p>
</blockquote>
<p>To build a Java Application based on a Java Application Schema, developers need to choose an appropriate Java Application Builder, of which there are currently two; the <tt>NativeJavaApplicationBuilder</tt> and the <tt>ContainerBasedJavaApplicationBuilder</tt>, both of which use <tt>JavaApplicationSchema</tt> to realize <tt>JavaApplication</tt>s.</p>

<div class="section">
<h5>The Native Java-based Application Builder<a name="The_Native_Java-based_Application_Builder"></a></h5>
<p>The <tt>com.oracle.tools.runtime.java.NativeJavaApplicationBuilder</tt> class is a Java Application Builder that creates Java Applications that run as native operating-system processes.</p>
<p><tt>NativeJavaApplicationBuilder</tt>s are much like the previously covered <tt>SimpleApplicationBuilder</tt>s in that they create native operating-system processes, but they additionally produce <tt>Application</tt>s specifically representings <tt>JavaApplication</tt>s. Developers may use these to then make Java-specific requests of the said applications, including:</p>

<ul>
  
<li>
<p>Request the running Class Path</p></li>
  
<li>
<p>Request the System Properties (used to start the application)</p></li>
  
<li>
<p>Making JMX requests (assuming JMX was enabled)</p></li>
</ul>
<p>For the most part using a <tt>NativeJavaApplicationBuilder</tt> is the same as other Application Builders; provide an appropriate Schema, name and Console when realizing the application.</p>
<p><b>Example: Using a Native Java Application Builder</b></p>

<div class="source">
<pre>NativeJavaApplicationBuilder builder =
    new NativeJavaApplicationBuilder();

JavaApplication application =
    builder.realize(schema,
                    &quot;My Application&quot;,
                    new SystemApplicationConsole());
</pre></div>
</div>
<div class="section">
<h5>The Container-based Java-based Application Builder<a name="The_Container-based_Java-based_Application_Builder"></a></h5>
<p>Another option for realizing Java-based Applications is to run them in the same Java Virtual Machine process as the controlling application. That is instead of creating a new native operating-system process for the realized Java Application, we instead run the application in the same process, much like an Application Server or Container does when launching Enterprise Applications.</p>
<p>To run an application in-process like an Application Server or Container, developers use the <tt>com.oracle.tools.runtime.java.ContainerBasedJavaApplicationBuilder</tt> instead of the <tt>NativeJavaApplicationBuilder</tt>.</p>
<p><b>Example: Using a Container-based Java Application Builder</b></p>

<div class="source">
<pre>ContainerBasedJavaApplicationBuilder builder =
    new ContainerBasedJavaApplicationBuilder();

JavaApplication application =
    builder.realize(schema,
                    &quot;My Application&quot;,
                    new SystemApplicationConsole());
</pre></div>

<blockquote>
<p>The only difference between launching a Java Application as a native  operating-system process and a container-based application is the  choice of the Java Application Builder.</p>
</blockquote>
<p>One of the important benefits of the Container-based approach for launching applications is that it&#x2019;s very easy to resolve defects when an application is running, simply because setting break-points is trivial. There is no need for multi-process and remote debugging configurations as everything is run &#x201c;in-process&#x201d;.</p>
<p>Although beneficial, there are some caveats to remember about this style of launching applications.</p>

<ol style="list-style-type: decimal">
  
<li>
<p>While the System I/O streams, System Properties and JMX Servers are isolated for each contained application, should an application call <tt>System.exit(...)</tt> all applications will terminate.</p></li>
  
<li>
<p>As each contained application is loaded with in its own ClassLoader considerations must be made as to the required size of the PermGen (especially pre Java 8) as a small PermGen may cause <tt>OutOfMemoryException</tt>s. To reduce the likelihood of this occuring it is recommended that a PermGen is sized accordingly using the <tt>-XX:MaxPermSize=nnnM</tt> setting, typically something larger than 256M often being sufficient.</p></li>
  
<li>
<p>Unlike Java EE container-based applications that have know lifecycle interfaces for starting and stopping applications, Java Console-based applications do not. Conseqently care must be taken when using executing container-based applications as the ability to &#x201c;stop&#x201d; an executing application may not be possible.</p></li>
</ol></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

                                                                  
<div class="copyright">Copyright © 2008-2013 Oracle Corporation. All rights reserved.</div>
                                                          
<div class="version">Version 1.3.0-SNAPSHOT: 2014-05-02 10:18</div>
                  
        
                </div>
    </footer>
        </body>
</html>
